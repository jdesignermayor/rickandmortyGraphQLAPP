exports.ids=[2],exports.modules={R1EA:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return LocalStorageService});var rxjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("2Vo4"),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("fXoL"),ngx_toastr__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("5eHb");class LocalStorageService{constructor(toastrSvc){this.toastrSvc=toastrSvc,this.charactersFavSubject=new rxjs__WEBPACK_IMPORTED_MODULE_0__.a(null),this.charactersFav$=this.charactersFavSubject.asObservable(),this.initialStorage()}addOrRemoveFavorite(character){const{id:id}=character;!!this.getFavoriteCharacters().find(fav=>fav.id===id)?this.removeFromFavorite(id):this.addToFavorite(character)}addToFavorite(character){try{const currentsFav=this.getFavoriteCharacters();localStorage.setItem("myFavorites",JSON.stringify([...currentsFav,character])),this.charactersFavSubject.next([...currentsFav,character]),this.toastrSvc.success(`${character.name} added to favorites.`,"Rick and Morty APP")}catch(error){console.log("Error saving localStorage.",error),this.toastrSvc.error(`Error saving localStorage ${error}`,"Rick and Morty APP")}}removeFromFavorite(id){try{const characters=this.getFavoriteCharacters().filter(item=>item.id!==id);localStorage.setItem("myFavorites",JSON.stringify([...characters])),this.charactersFavSubject.next([...characters]),this.toastrSvc.warning("Remove from favorites.","Rick and Morty APP")}catch(error){console.log("Error removing localStorage.",error),this.toastrSvc.error(`Error removing localStorage ${error}`,"Rick and Morty APP")}}getFavoriteCharacters(){try{const charactersFav=JSON.parse(localStorage.getItem("myFavorites"));return this.charactersFavSubject.next(charactersFav),charactersFav}catch(error){console.log("Error getting favorites from localStorage.",error)}}clearStorage(){try{localStorage.clear()}catch(error){console.log("Error cleaning localStorage.",error)}}initialStorage(){JSON.parse(localStorage.getItem("myFavorites"))||localStorage.setItem("myFavorites",JSON.stringify([])),this.getFavoriteCharacters()}}LocalStorageService.\u0275fac=function LocalStorageService_Factory(t){return new(t||LocalStorageService)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Pc(ngx_toastr__WEBPACK_IMPORTED_MODULE_2__.b))},LocalStorageService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Cc({token:LocalStorageService,factory:LocalStorageService.\u0275fac,providedIn:"root"})},RF4Q:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return CharactersCardComponent});var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_app_shared_services_localStorage_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("R1EA"),_angular_router__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("tyNb");const _c0=function(a1){return["/character-details",a1]};class CharactersCardComponent{constructor(localStorageSvc){this.localStorageSvc=localStorageSvc}getIcon(){return this.character.isFavorite?"heart-solid.svg":"heart.svg"}onToggleFavorite(){const isFavorite=this.character.isFavorite;this.getIcon(),this.character.isFavorite=!isFavorite,this.localStorageSvc.addOrRemoveFavorite(this.character)}}CharactersCardComponent.\u0275fac=function CharactersCardComponent_Factory(t){return new(t||CharactersCardComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.Gc(_app_shared_services_localStorage_service__WEBPACK_IMPORTED_MODULE_1__.a))},CharactersCardComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ac({type:CharactersCardComponent,selectors:[["app-characters-card"]],inputs:{character:"character"},decls:22,vars:9,consts:[[1,"card"],[1,"card__link",3,"routerLink"],["rel","preload","as","image","width","300","height","300","alt","character.name",3,"src"],[1,"card__details"],[1,"card__favorite"],["rel","preload","as","image","width","30","height","30","alt","character.name",3,"src","click"],[1,"card__list"],[1,"table__label"]],template:function CharactersCardComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__.Lc(0,"article",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Lc(1,"a",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Lc(2,"figure"),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Hc(3,"img",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Kc(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Kc(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Lc(4,"div",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Lc(5,"figure",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Lc(6,"img",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Sc("click",function CharactersCardComponent_Template_img_click_6_listener(){return ctx.onToggleFavorite()}),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Kc(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Kc(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Lc(7,"h3"),_angular_core__WEBPACK_IMPORTED_MODULE_0__.kd(8),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Kc(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Lc(9,"ul",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Lc(10,"li"),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Lc(11,"label",7),_angular_core__WEBPACK_IMPORTED_MODULE_0__.kd(12,"Status: "),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Kc(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.kd(13),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Kc(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Lc(14,"li"),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Lc(15,"label",7),_angular_core__WEBPACK_IMPORTED_MODULE_0__.kd(16,"Species:"),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Kc(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.kd(17),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Kc(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Lc(18,"li"),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Lc(19,"label",7),_angular_core__WEBPACK_IMPORTED_MODULE_0__.kd(20,"Gender:"),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Kc(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.kd(21),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Kc(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Kc(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Kc(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Kc()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__.wc(1),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Xc("routerLink",_angular_core__WEBPACK_IMPORTED_MODULE_0__.ad(7,_c0,ctx.character.id)),_angular_core__WEBPACK_IMPORTED_MODULE_0__.wc(2),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Xc("src",ctx.character.image,_angular_core__WEBPACK_IMPORTED_MODULE_0__.fd),_angular_core__WEBPACK_IMPORTED_MODULE_0__.wc(3),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yc("src","/assets/imgs/",ctx.getIcon(),"",_angular_core__WEBPACK_IMPORTED_MODULE_0__.fd),_angular_core__WEBPACK_IMPORTED_MODULE_0__.wc(2),_angular_core__WEBPACK_IMPORTED_MODULE_0__.ld(ctx.character.name),_angular_core__WEBPACK_IMPORTED_MODULE_0__.wc(5),_angular_core__WEBPACK_IMPORTED_MODULE_0__.md("",ctx.character.status," "),_angular_core__WEBPACK_IMPORTED_MODULE_0__.wc(4),_angular_core__WEBPACK_IMPORTED_MODULE_0__.md("",ctx.character.species," "),_angular_core__WEBPACK_IMPORTED_MODULE_0__.wc(4),_angular_core__WEBPACK_IMPORTED_MODULE_0__.md(" ",ctx.character.gender," "))},directives:[_angular_router__WEBPACK_IMPORTED_MODULE_2__.a],styles:["figure.card__favorite[_ngcontent-%COMP%]{background:transparent}"],changeDetection:0})},ekAR:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return CharactersCardModule});var _angular_common__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("ofXK"),_angular_router__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("tyNb"),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("fXoL");class CharactersCardModule{}CharactersCardModule.\u0275fac=function CharactersCardModule_Factory(t){return new(t||CharactersCardModule)},CharactersCardModule.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_2__.Ec({type:CharactersCardModule}),CharactersCardModule.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_2__.Dc({imports:[[_angular_common__WEBPACK_IMPORTED_MODULE_0__.c,_angular_router__WEBPACK_IMPORTED_MODULE_1__.b]]})},iiaH:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return DataService});var apollo_angular__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("bWj1"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2Vo4"),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("IzEk"),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("wO+i"),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("zp1y"),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("vkgz"),_angular_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("fXoL"),apollo_angular__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("/IUn"),_localStorage_service__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("R1EA");const QUERY=apollo_angular__WEBPACK_IMPORTED_MODULE_0__.gql`
 {
  episodes {
    results {
      name
      episode
    }
  }
  characters {
    results {
      id
      name
      status
      species
      gender
      image
    }
  }
}
`;class DataService{constructor(apollo,localStorageSvc){this.apollo=apollo,this.localStorageSvc=localStorageSvc,this.episodesSubject=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a(null),this.episodes$=this.episodesSubject.asObservable(),this.charactersSubject=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a(null),this.characters$=this.charactersSubject.asObservable(),this.getDataAPI()}getCharactersByPage(pageNum){const QUERY_BY_PAGE=apollo_angular__WEBPACK_IMPORTED_MODULE_0__.gql`
    {
      characters(page: ${pageNum}) {
        results {
          id
          name
          status
          species
          gender
          image
        }
      }
    }
    `;this.apollo.watchQuery({query:QUERY_BY_PAGE}).valueChanges.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)(1),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)("data","characters"),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)(this.characters$),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)(([apiResponse,characters])=>{this.parseCharactersData([...characters,...apiResponse.results])})).subscribe()}getDataAPI(){this.apollo.watchQuery({query:QUERY}).valueChanges.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)(1),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)(({data:data})=>{const{characters:characters,episodes:episodes}=data;this.episodesSubject.next(episodes.results),this.parseCharactersData(characters.results)})).subscribe()}parseCharactersData(characters){const currentsFav=this.localStorageSvc.getFavoriteCharacters(),newData=characters.map(character=>{const found=!!currentsFav.find(fav=>fav.id===character.id);return Object.assign(Object.assign({},character),{isFavorite:found})});this.charactersSubject.next(newData)}}DataService.\u0275fac=function DataService_Factory(t){return new(t||DataService)(_angular_core__WEBPACK_IMPORTED_MODULE_6__.Pc(apollo_angular__WEBPACK_IMPORTED_MODULE_7__.b),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Pc(_localStorage_service__WEBPACK_IMPORTED_MODULE_8__.a))},DataService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_6__.Cc({token:DataService,factory:DataService.\u0275fac,providedIn:"root"})},o8Cw:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"CharactersListModule",function(){return CharactersListModule});var common=__webpack_require__("ofXK"),router=__webpack_require__("tyNb"),core=__webpack_require__("fXoL"),data_service=__webpack_require__("iiaH"),ngx_infinite_scroll=__webpack_require__("dlKe"),characters_card_component=__webpack_require__("RF4Q");function CharactersListComponent_app_characters_card_1_Template(rf,ctx){if(1&rf&&core.Hc(0,"app-characters-card",3),2&rf){const character_r2=ctx.$implicit;core.Xc("character",character_r2)}}function CharactersListComponent_button_3_Template(rf,ctx){if(1&rf){const _r4=core.Mc();core.Lc(0,"button",4),core.Sc("click",function CharactersListComponent_button_3_Template_button_click_0_listener(){core.dd(_r4);return core.Uc().onScrollTop()}),core.kd(1,"\u2b06\ufe0f"),core.Kc()}}class CharactersListComponent{constructor(document,dataSvc){this.document=document,this.dataSvc=dataSvc,this.characters$=this.dataSvc.characters$,this.showButton=!1,this.scrollHeight=500,this.pageNum=1}onWindowScroll(){const yOffSet=window.pageYOffset,scrollTop=this.document.documentElement.scrollTop;this.showButton=(yOffSet||scrollTop)>this.scrollHeight}onScrollTop(){this.document.documentElement.scrollTop=0}onScrollDown(){this.pageNum++,this.dataSvc.getCharactersByPage(this.pageNum)}}CharactersListComponent.\u0275fac=function CharactersListComponent_Factory(t){return new(t||CharactersListComponent)(core.Gc(common.d),core.Gc(data_service.a))},CharactersListComponent.\u0275cmp=core.Ac({type:CharactersListComponent,selectors:[["app-characters-list"]],hostBindings:function CharactersListComponent_HostBindings(rf,ctx){1&rf&&core.Sc("scroll",function CharactersListComponent_scroll_HostBindingHandler(){return ctx.onWindowScroll()},!1,core.cd)},decls:4,vars:4,consts:[["infiniteScroll","",1,"character__list",3,"scrolled"],[3,"character",4,"ngFor","ngForOf"],["class","button",3,"click",4,"ngIf"],[3,"character"],[1,"button",3,"click"]],template:function CharactersListComponent_Template(rf,ctx){1&rf&&(core.Lc(0,"section",0),core.Sc("scrolled",function CharactersListComponent_Template_section_scrolled_0_listener(){return ctx.onScrollDown()}),core.jd(1,CharactersListComponent_app_characters_card_1_Template,1,1,"app-characters-card",1),core.Vc(2,"async"),core.jd(3,CharactersListComponent_button_3_Template,2,0,"button",2),core.Kc()),2&rf&&(core.wc(1),core.Xc("ngForOf",core.Wc(2,2,ctx.characters$)),core.wc(2),core.Xc("ngIf",ctx.showButton))},directives:[ngx_infinite_scroll.a,common.i,common.j,characters_card_component.a],pipes:[common.b],styles:["section.character__list[_ngcontent-%COMP%]{flex-wrap:wrap;height:auto}.button[_ngcontent-%COMP%], section.character__list[_ngcontent-%COMP%]{display:flex;justify-content:center}.button[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:30px;z-index:1;padding:1rem;background-color:#1f1e1e;border:1px solid #1f1e1e;cursor:pointer;font-size:1.5rem;width:45px;height:45px;align-items:center;transition:all .4s ease-in-out}.button[_ngcontent-%COMP%]:hover{background-color:#8c43e6;border:1px solid #fff;font-size:2rem}"]});const routes=[{path:"",component:CharactersListComponent}];class CharactersListRoutingModule{}CharactersListRoutingModule.\u0275fac=function CharactersListRoutingModule_Factory(t){return new(t||CharactersListRoutingModule)},CharactersListRoutingModule.\u0275mod=core.Ec({type:CharactersListRoutingModule}),CharactersListRoutingModule.\u0275inj=core.Dc({imports:[[router.b.forChild(routes)],router.b]});var characters_card_module=__webpack_require__("ekAR");class CharactersListModule{}CharactersListModule.\u0275fac=function CharactersListModule_Factory(t){return new(t||CharactersListModule)},CharactersListModule.\u0275mod=core.Ec({type:CharactersListModule}),CharactersListModule.\u0275inj=core.Dc({imports:[[common.c,CharactersListRoutingModule,characters_card_module.a,ngx_infinite_scroll.b]]})}};