exports.ids=[3],exports.modules={R1EA:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return LocalStorageService});var rxjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("2Vo4"),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("fXoL"),ngx_toastr__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("5eHb");class LocalStorageService{constructor(toastrSvc){this.toastrSvc=toastrSvc,this.charactersFavSubject=new rxjs__WEBPACK_IMPORTED_MODULE_0__.a(null),this.charactersFav$=this.charactersFavSubject.asObservable(),this.initialStorage()}addOrRemoveFavorite(character){const{id:id}=character;!!this.getFavoriteCharacters().find(fav=>fav.id===id)?this.removeFromFavorite(id):this.addToFavorite(character)}addToFavorite(character){try{const currentsFav=this.getFavoriteCharacters();localStorage.setItem("myFavorites",JSON.stringify([...currentsFav,character])),this.charactersFavSubject.next([...currentsFav,character]),this.toastrSvc.success(`${character.name} added to favorites.`,"Rick and Morty APP")}catch(error){console.log("Error saving localStorage.",error),this.toastrSvc.error(`Error saving localStorage ${error}`,"Rick and Morty APP")}}removeFromFavorite(id){try{const characters=this.getFavoriteCharacters().filter(item=>item.id!==id);localStorage.setItem("myFavorites",JSON.stringify([...characters])),this.charactersFavSubject.next([...characters]),this.toastrSvc.warning("Remove from favorites.","Rick and Morty APP")}catch(error){console.log("Error removing localStorage.",error),this.toastrSvc.error(`Error removing localStorage ${error}`,"Rick and Morty APP")}}getFavoriteCharacters(){try{const charactersFav=JSON.parse(localStorage.getItem("myFavorites"));return this.charactersFavSubject.next(charactersFav),charactersFav}catch(error){console.log("Error getting favorites from localStorage.",error)}}clearStorage(){try{localStorage.clear()}catch(error){console.log("Error cleaning localStorage.",error)}}initialStorage(){JSON.parse(localStorage.getItem("myFavorites"))||localStorage.setItem("myFavorites",JSON.stringify([])),this.getFavoriteCharacters()}}LocalStorageService.\u0275fac=function LocalStorageService_Factory(t){return new(t||LocalStorageService)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Pc(ngx_toastr__WEBPACK_IMPORTED_MODULE_2__.b))},LocalStorageService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Cc({token:LocalStorageService,factory:LocalStorageService.\u0275fac,providedIn:"root"})},iiaH:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return DataService});var apollo_angular__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("bWj1"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2Vo4"),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("IzEk"),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("wO+i"),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("zp1y"),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("vkgz"),_angular_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("fXoL"),apollo_angular__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("/IUn"),_localStorage_service__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("R1EA");const QUERY=apollo_angular__WEBPACK_IMPORTED_MODULE_0__.gql`
 {
  episodes {
    results {
      name
      episode
    }
  }
  characters {
    results {
      id
      name
      status
      species
      gender
      image
    }
  }
}
`;class DataService{constructor(apollo,localStorageSvc){this.apollo=apollo,this.localStorageSvc=localStorageSvc,this.episodesSubject=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a(null),this.episodes$=this.episodesSubject.asObservable(),this.charactersSubject=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a(null),this.characters$=this.charactersSubject.asObservable(),this.getDataAPI()}getCharactersByPage(pageNum){const QUERY_BY_PAGE=apollo_angular__WEBPACK_IMPORTED_MODULE_0__.gql`
    {
      characters(page: ${pageNum}) {
        results {
          id
          name
          status
          species
          gender
          image
        }
      }
    }
    `;this.apollo.watchQuery({query:QUERY_BY_PAGE}).valueChanges.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)(1),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)("data","characters"),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)(this.characters$),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)(([apiResponse,characters])=>{this.parseCharactersData([...characters,...apiResponse.results])})).subscribe()}getDataAPI(){this.apollo.watchQuery({query:QUERY}).valueChanges.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)(1),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)(({data:data})=>{const{characters:characters,episodes:episodes}=data;this.episodesSubject.next(episodes.results),this.parseCharactersData(characters.results)})).subscribe()}parseCharactersData(characters){const currentsFav=this.localStorageSvc.getFavoriteCharacters(),newData=characters.map(character=>{const found=!!currentsFav.find(fav=>fav.id===character.id);return Object.assign(Object.assign({},character),{isFavorite:found})});this.charactersSubject.next(newData)}}DataService.\u0275fac=function DataService_Factory(t){return new(t||DataService)(_angular_core__WEBPACK_IMPORTED_MODULE_6__.Pc(apollo_angular__WEBPACK_IMPORTED_MODULE_7__.b),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Pc(_localStorage_service__WEBPACK_IMPORTED_MODULE_8__.a))},DataService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_6__.Cc({token:DataService,factory:DataService.\u0275fac,providedIn:"root"})},"l8H+":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"EpisodesModule",function(){return EpisodesModule});var common=__webpack_require__("ofXK"),router=__webpack_require__("tyNb"),core=__webpack_require__("fXoL"),data_service=__webpack_require__("iiaH");function EpisodesComponent_li_2_Template(rf,ctx){if(1&rf&&(core.Lc(0,"li"),core.kd(1),core.Kc()),2&rf){const episode_r1=ctx.$implicit;core.wc(1),core.nd(" ",episode_r1.episode," - ",episode_r1.name," ")}}class EpisodesComponent{constructor(dataSvc){this.dataSvc=dataSvc,this.episodes$=this.dataSvc.episodes$}ngOnInit(){}}EpisodesComponent.\u0275fac=function EpisodesComponent_Factory(t){return new(t||EpisodesComponent)(core.Gc(data_service.a))},EpisodesComponent.\u0275cmp=core.Ac({type:EpisodesComponent,selectors:[["app-episodes"]],decls:4,vars:3,consts:[[1,"container"],[1,"episodes__list"],[4,"ngFor","ngForOf"]],template:function EpisodesComponent_Template(rf,ctx){1&rf&&(core.Lc(0,"section",0),core.Lc(1,"ul",1),core.jd(2,EpisodesComponent_li_2_Template,2,2,"li",2),core.Vc(3,"async"),core.Kc(),core.Kc()),2&rf&&(core.wc(2),core.Xc("ngForOf",core.Wc(3,1,ctx.episodes$)))},directives:[common.i],pipes:[common.b],styles:[".container[_ngcontent-%COMP%]{width:50%}@media screen and (max-width:500px){.container[_ngcontent-%COMP%]{width:60%}}"]});const routes=[{path:"",component:EpisodesComponent}];class EpisodesRoutingModule{}EpisodesRoutingModule.\u0275fac=function EpisodesRoutingModule_Factory(t){return new(t||EpisodesRoutingModule)},EpisodesRoutingModule.\u0275mod=core.Ec({type:EpisodesRoutingModule}),EpisodesRoutingModule.\u0275inj=core.Dc({imports:[[router.b.forChild(routes)],router.b]});class EpisodesModule{}EpisodesModule.\u0275fac=function EpisodesModule_Factory(t){return new(t||EpisodesModule)},EpisodesModule.\u0275mod=core.Ec({type:EpisodesModule}),EpisodesModule.\u0275inj=core.Dc({imports:[[common.c,EpisodesRoutingModule]]})},"wO+i":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return pluck});var _map__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("lJxs");function pluck(...properties){const length=properties.length;if(0===length)throw new Error("list of properties cannot be empty.");return source=>Object(_map__WEBPACK_IMPORTED_MODULE_0__.a)(function plucker(props,length){return x=>{let currentProp=x;for(let i=0;i<length;i++){const p=null!=currentProp?currentProp[props[i]]:void 0;if(void 0===p)return;currentProp=p}return currentProp}}(properties,length))(source)}},zp1y:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return withLatestFrom});var _OuterSubscriber__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("l7GE"),_util_subscribeToResult__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("ZUHj");function withLatestFrom(...args){return source=>{let project;"function"==typeof args[args.length-1]&&(project=args.pop());const observables=args;return source.lift(new WithLatestFromOperator(observables,project))}}class WithLatestFromOperator{constructor(observables,project){this.observables=observables,this.project=project}call(subscriber,source){return source.subscribe(new WithLatestFromSubscriber(subscriber,this.observables,this.project))}}class WithLatestFromSubscriber extends _OuterSubscriber__WEBPACK_IMPORTED_MODULE_0__.a{constructor(destination,observables,project){super(destination),this.observables=observables,this.project=project,this.toRespond=[];const len=observables.length;this.values=new Array(len);for(let i=0;i<len;i++)this.toRespond.push(i);for(let i=0;i<len;i++){let observable=observables[i];this.add(Object(_util_subscribeToResult__WEBPACK_IMPORTED_MODULE_1__.a)(this,observable,void 0,i))}}notifyNext(_outerValue,innerValue,outerIndex){this.values[outerIndex]=innerValue;const toRespond=this.toRespond;if(toRespond.length>0){const found=toRespond.indexOf(outerIndex);-1!==found&&toRespond.splice(found,1)}}notifyComplete(){}_next(value){if(0===this.toRespond.length){const args=[value,...this.values];this.project?this._tryProject(args):this.destination.next(args)}}_tryProject(args){let result;try{result=this.project.apply(this,args)}catch(err){return void this.destination.error(err)}this.destination.next(result)}}}};